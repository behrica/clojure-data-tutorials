[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Exploring ggplot",
    "section": "",
    "text": "This is part of the Scicloj Clojure Data Scrapbook.\n\n1 Preface\nIn this series of notebooks, we explore ggplot2, a famous R package for grammar-of-graphics data visualization, from within Clojure.\n\nsource: projects/datavis/ggplot/notebooks/index.clj",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Preface</span>"
    ]
  },
  {
    "objectID": "using_clojisr.html",
    "href": "using_clojisr.html",
    "title": "3  Using ggplot Clojure using ClojisR",
    "section": "",
    "text": "3.1 Setup\nWe will use ClojisR to call R from Clojure.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Using ggplot Clojure using ClojisR</span>"
    ]
  },
  {
    "objectID": "using_clojisr.html#setup",
    "href": "using_clojisr.html#setup",
    "title": "3  Using ggplot Clojure using ClojisR",
    "section": "",
    "text": "(ns using-clojisr\n  (:require [clojisr.v1.r :as r :refer [r]]\n            [clojisr.v1.applications.plotting :as plotting]\n            [scicloj.kindly.v4.kind :as kind]\n            [tablecloth.api :as tc]))",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Using ggplot Clojure using ClojisR</span>"
    ]
  },
  {
    "objectID": "using_clojisr.html#plotting-by-calling-r-code",
    "href": "using_clojisr.html#plotting-by-calling-r-code",
    "title": "3  Using ggplot Clojure using ClojisR",
    "section": "3.2 Plotting by calling R code",
    "text": "3.2 Plotting by calling R code\nLet us load ggplot2 at the R runtime:\n\n(r/library \"ggplot2\")\n\n\n[1] \"ggplot2\"   \"Rserve\"    \"stats\"     \"graphics\"  \"grDevices\" \"utils\"    \n[7] \"datasets\"  \"methods\"   \"base\"     \n\n\nWe will use the mpg dataset, which is part of the ggplot package.\n\n(-&gt; \"mpg\"\n    r\n    r/r-&gt;clj)\n\n_unnamed [234 11]:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n:manufacturer\n:model\n:displ\n:year\n:cyl\n:trans\n:drv\n:cty\n:hwy\n:fl\n:class\n\n\n\n\naudi\na4\n1.8\n1999\n4\nauto(l5)\nf\n18\n29\np\ncompact\n\n\naudi\na4\n1.8\n1999\n4\nmanual(m5)\nf\n21\n29\np\ncompact\n\n\naudi\na4\n2.0\n2008\n4\nmanual(m6)\nf\n20\n31\np\ncompact\n\n\naudi\na4\n2.0\n2008\n4\nauto(av)\nf\n21\n30\np\ncompact\n\n\naudi\na4\n2.8\n1999\n6\nauto(l5)\nf\n16\n26\np\ncompact\n\n\naudi\na4\n2.8\n1999\n6\nmanual(m5)\nf\n18\n26\np\ncompact\n\n\naudi\na4\n3.1\n2008\n6\nauto(av)\nf\n18\n27\np\ncompact\n\n\naudi\na4 quattro\n1.8\n1999\n4\nmanual(m5)\n4\n18\n26\np\ncompact\n\n\naudi\na4 quattro\n1.8\n1999\n4\nauto(l5)\n4\n16\n25\np\ncompact\n\n\naudi\na4 quattro\n2.0\n2008\n4\nmanual(m6)\n4\n20\n28\np\ncompact\n\n\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n…\n\n\nvolkswagen\nnew beetle\n2.0\n1999\n4\nmanual(m5)\nf\n21\n29\nr\nsubcompact\n\n\nvolkswagen\nnew beetle\n2.0\n1999\n4\nauto(l4)\nf\n19\n26\nr\nsubcompact\n\n\nvolkswagen\nnew beetle\n2.5\n2008\n5\nmanual(m5)\nf\n20\n28\nr\nsubcompact\n\n\nvolkswagen\nnew beetle\n2.5\n2008\n5\nauto(s6)\nf\n20\n29\nr\nsubcompact\n\n\nvolkswagen\npassat\n1.8\n1999\n4\nmanual(m5)\nf\n21\n29\np\nmidsize\n\n\nvolkswagen\npassat\n1.8\n1999\n4\nauto(l5)\nf\n18\n29\np\nmidsize\n\n\nvolkswagen\npassat\n2.0\n2008\n4\nauto(s6)\nf\n19\n28\np\nmidsize\n\n\nvolkswagen\npassat\n2.0\n2008\n4\nmanual(m6)\nf\n21\n29\np\nmidsize\n\n\nvolkswagen\npassat\n2.8\n1999\n6\nauto(l5)\nf\n16\n26\np\nmidsize\n\n\nvolkswagen\npassat\n2.8\n1999\n6\nmanual(m5)\nf\n18\n26\np\nmidsize\n\n\nvolkswagen\npassat\n3.6\n2008\n6\nauto(s6)\nf\n17\n26\np\nmidsize\n\n\n\nHere is how we may generate a plot from R code:\n\n(def plot1\n  (r \"(ggplot(mpg, aes(cty, hwy, color=factor(cyl)))\n         + geom_point()\n         + stat_smooth(method=\\\"lm\\\")\n         + facet_wrap(~cyl))\"))\n\nRendering as SVG:\n\n(-&gt; plot1\n    plotting/plot-&gt;svg\n    kind/html)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n\n\n\n\n\n  \n\n\n\n\n\n  \n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n\n\n\n\n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n\n\n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n  \n  \n\n\n\n\n\n\n  \n  \n  \n\n\n  \n  \n  \n\n\n\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n\n\n  \n\n\n  \n\n\n  \n\n\n\n\nRendering as a bitmap image:\n\n(-&gt; plot1\n    plotting/plot-&gt;buffered-image)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Using ggplot Clojure using ClojisR</span>"
    ]
  },
  {
    "objectID": "using_clojisr.html#plotting-by-calling-generated-r-code",
    "href": "using_clojisr.html#plotting-by-calling-generated-r-code",
    "title": "3  Using ggplot Clojure using ClojisR",
    "section": "3.3 Plotting by calling generated R code",
    "text": "3.3 Plotting by calling generated R code\nWe may also plot by generating the R code from a Clojure form.\nLet us require ggplot as a Clojure namespace.\n\n(r/require-r '[ggplot2 :as gg])\n\n\nnil\n\nNow we can plot using code generation:\n\n(-&gt; (r/r+ (gg/ggplot gg/mpg\n                     (gg/aes :x 'cty\n                             :y 'hwy\n                             :color '(factor cyl)))\n          (gg/geom_point)\n          (gg/stat_smooth :method \"lm\")\n          (gg/facet_wrap '(tilde . cyl)))\n    r\n    plotting/plot-&gt;svg\n    kind/html)",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Using ggplot Clojure using ClojisR</span>"
    ]
  },
  {
    "objectID": "using_clojisr.html#plotting-by-calling-generated-r-code-with-clojure-data",
    "href": "using_clojisr.html#plotting-by-calling-generated-r-code-with-clojure-data",
    "title": "3  Using ggplot Clojure using ClojisR",
    "section": "3.4 Plotting by calling generated R code with Clojure data",
    "text": "3.4 Plotting by calling generated R code with Clojure data\nWe may further use ClojisR’s code generation with Clojure data.\nLet us read the same mpg dataset. We have it in the metamorph.ml package.\n\nsource: projects/datavis/ggplot/notebooks/using_clojisr.clj",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Using ggplot Clojure using ClojisR</span>"
    ]
  }
]